"use strict";(self.webpackChunkFCCViewer=self.webpackChunkFCCViewer||[]).push([[675],{2675:(O,g,f)=>{f.r(g),f.d(g,{drawPolyLine3D:()=>C,drawPolyMarker3D:()=>E});var z=f(7983),D=f(8428),x=f(8802),M=f(3625);function u(i,e){let n=i.getFramePainter();if(!n?.mode3d||!e)return null;if(n.toplevel)return n;let l=i.getMainPainter();return l?"function"==typeof l.drawExtras?l.drawExtras(e):null:(0,M.drawDummy3DGeom)(i)}function E(){let i=this.getObject(),e=u(this,i);if(!(e&&"object"==typeof e&&e.grx&&e.gry&&e.grz))return e;let n=1,a=0,r=i.fP;for(let t=0;t<r.length;t+=3)r[t]<e.scale_xmin||r[t]>e.scale_xmax||r[t+1]<e.scale_ymin||r[t+1]>e.scale_ymax||r[t+2]<e.scale_zmin||r[t+2]>e.scale_zmax||++a;D.settings.OptimizeDraw>0&&a>5e4&&(n=Math.floor(a/5e4),n<=2&&(n=2));let s=Math.floor(a/n),y=new x.B_(s,e.webgl,e.size_x3d/100),d=new Int32Array(s),_=0,w=0;for(let t=0;t<r.length;t+=3)r[t]<e.scale_xmin||r[t]>e.scale_xmax||r[t+1]<e.scale_ymin||r[t+1]>e.scale_ymax||r[t+2]<e.scale_zmin||r[t+2]>e.scale_zmax||n>1&&(_=(_+1)%n,0!==_)||(d[w++]=t,y.addPoint(e.grx(r[t]),e.gry(r[t+1]),e.grz(r[t+2])));return y.createPoints({color:this.getColor(i.fMarkerColor),style:i.fMarkerStyle}).then(t=>(t.tip_color=3===i.fMarkerColor?16711680:65280,t.tip_name=i.fName||"Poly3D",t.poly=i,t.painter=e,t.scale0=.7*y.scale,t.index=d,e.toplevel.add(t),t.tooltip=function(h){if(!Number.isInteger(h.index))return console.error(`intersect.index not provided, three.js version ${z.UZH}`),null;let o=Math.floor(h.index/this.nvertex);if(o<0||o>=this.index.length)return null;o=this.index[o];let c=this.painter,p=c.grx(this.poly.fP[o]),P=c.gry(this.poly.fP[o+1]),m=c.grz(this.poly.fP[o+2]);return{x1:p-this.scale0,x2:p+this.scale0,y1:P-this.scale0,y2:P+this.scale0,z1:m-this.scale0,z2:m+this.scale0,color:this.tip_color,lines:[this.tip_name,"pnt: "+o/3,"x: "+c.axisAsText("x",this.poly.fP[o]),"y: "+c.axisAsText("y",this.poly.fP[o+1]),"z: "+c.axisAsText("z",this.poly.fP[o+2])]}},e.render3D(100),this))}function C(){let i=this.getObject(),e=u(this,i);if(!(e&&"object"==typeof e&&e.grx&&e.gry&&e.grz))return e;let n=3*i.fN,l=i.fP,a=[];for(let s=3;s<n;s+=3)a.push(e.grx(l[s-3]),e.gry(l[s-2]),e.grz(l[s-1]),e.grx(l[s]),e.gry(l[s+1]),e.grz(l[s+2]));let r=(0,x.Qy)(a,(0,x.rq)(this,i));return e.toplevel.add(r),!0}}}]);