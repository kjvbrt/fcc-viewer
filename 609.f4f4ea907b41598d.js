"use strict";(self.webpackChunkFCCViewer=self.webpackChunkFCCViewer||[]).push([[609],{6609:(m,C,p)=>{p.r(C),p.d(C,{TWebPaintingPainter:()=>b});var _=p(2374),S=p(4010);class b extends S.tK{updateObject(t){return!!this.matchObjectType(t)&&(this.assignObject(t),!0)}redraw(){const t=this.getObject(),r=this.getAxisToSvgFunc();if(!t?.fOper||!r)return;let u,T,i,a=0,s={},x=null,w="none",g="",l=t.fOper.split(";");const c=e=>{if(e!=w&&(x&&(x.attr("d",g),g="",x=null,w="none"),e))switch(w=e,x=this.draw_g.append("svg:path"),e){case"f":x.call(this.fillatt.func);break;case"l":x.call(this.lineatt.func).style("fill","none");break;case"m":x.call(this.markeratt.func)}},y=(e,h)=>{let n=0,f={_typename:"any"};for(let o=0;o<h.length;++o){let d=e.indexOf(":",n+1);f[h[o]]=parseInt(e.slice(n+1,d>n?d:void 0)),n=d}return f},P=e=>{for(;++e<l.length;)switch(u=l[e][0],u){case"z":this.createAttLine({attr:y(l[e],["fLineColor","fLineStyle","fLineWidth"]),force:!0}),c();continue;case"y":this.createAttFill({attr:y(l[e],["fFillColor","fFillStyle"]),force:!0}),c();continue;case"x":this.createAttMarker({attr:y(l[e],["fMarkerColor","fMarkerStyle","fMarkerSize"]),force:!0}),c();continue;case"o":s=y(l[e],["fTextColor","fTextFont","fTextSize","fTextAlign","fTextAngle"]),s.fTextSize<0&&(s.fTextSize*=-.001),c();continue;case"r":case"b":{c("b"==u?"f":"l");let h=r.x(t.fBuf[a++]),n=r.y(t.fBuf[a++]),f=r.x(t.fBuf[a++]),o=r.y(t.fBuf[a++]);g+=`M${h},${n}h${f-h}v${o-n}h${h-f}z`;continue}case"l":case"f":for(c(u),T=parseInt(l[e].slice(1)),i=0;i<T;++i)g+=(i>0?"L":"M")+r.x(t.fBuf[a++])+","+r.y(t.fBuf[a++]);"f"==u&&(g+="Z");continue;case"m":for(c(u),T=parseInt(l[e].slice(1)),this.markeratt.resetPos(),i=0;i<T;++i)g+=this.markeratt.create(r.x(t.fBuf[a++]),r.y(t.fBuf[a++]));continue;case"h":case"t":if(s.fTextSize){c();let h=s.fTextSize>1?s.fTextSize:this.getPadPainter().getPadHeight()*s.fTextSize,n=s.fTextAngle,f=l[e].slice(1),o=this.draw_g.append("svg:g");if(n>=360&&(n-=360*Math.floor(n/360)),this.startTextDrawing(s.fTextFont,h,o),"h"==u){let d="";for(i=0;i<f.length;i+=2)d+=String.fromCharCode(parseInt(f.slice(i,i+2),16));f=d}return this.drawText({align:s.fTextAlign,x:r.x(t.fBuf[a++]),y:r.y(t.fBuf[a++]),rotate:-n,text:f,color:(0,_.Lq)(s.fTextColor),latex:0,draw_g:o}),this.finishTextDrawing(o).then(()=>P(e))}continue;default:console.log("unsupported operation "+u)}return Promise.resolve(!0)};return this.createG(),P(-1).then(()=>(c(),this))}static draw(t,r){let a=new b(t,r);return a.addToPadPrimitives(),a.redraw()}}}}]);