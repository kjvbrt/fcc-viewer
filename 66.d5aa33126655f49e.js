"use strict";(self.webpackChunkFCCViewer=self.webpackChunkFCCViewer||[]).push([[66],{6066:(M,c,h)=>{h.r(c),h.d(c,{TRatioPlotPainter:()=>g});var T=h(8428),w=h(4010),D=h(3482),E=h(3966);class g extends w.tK{setGridsRange(i,n){let d=this.getObject();if(i===n){let e=this.getPadPainter()?.findPainterFor(d.fLowerPad,"lower_pad","TPad")?.getFramePainter()?.x_handle;if(!e)return;i=e.full_min,n=e.full_max}d.fGridlines.forEach(e=>{e.fX1=i,e.fX2=n})}redraw(){let i=this.getObject(),n=this.getPadPainter(),d=n.findPainterFor(i.fTopPad,"top_pad","TPad");d&&d.disablePadDrawing();let e=n.findPainterFor(i.fUpperPad,"upper_pad","TPad"),u=e?.getMainPainter(),t=e?.getFramePainter(),l=n.findPainterFor(i.fLowerPad,"lower_pad","TPad"),C=l?.getMainPainter(),o=l?.getFramePainter(),s=20,m=Promise.resolve(!0);if(e&&u&&t&&o&&!e._ratio_configured){e._ratio_configured=!0,u.options.Axis=0,s=u.getHisto().fYaxis.fLabelSize,s<1&&(s=Math.round(s*Math.min(e.getPadWidth(),e.getPadHeight())));let f=u.getHisto();f.fXaxis.fLabelSize=0,f.fXaxis.fTitle="",f.fYaxis.fLabelSize=s,f.fYaxis.fTitleSize=s,e.getRootPad().fTicky=1,m=e.redrawPad().then(()=>(t.o_zoom=t.zoom,t._ratio_low_fp=o,t._ratio_painter=this,t.zoom=function(P,p,r,_,a,z){return this._ratio_painter.setGridsRange(P,p),this._ratio_low_fp.o_zoom(P,p),this.o_zoom(P,p,r,_,a,z)},t.o_sizeChanged=t.sizeChanged,t.sizeChanged=function(){this.o_sizeChanged(),this._ratio_low_fp.fX1NDC=this.fX1NDC,this._ratio_low_fp.fX2NDC=this.fX2NDC,this._ratio_low_fp.o_sizeChanged()},!0))}return m.then(()=>{if(!l||!C||!o||!t||l._ratio_configured)return this;l._ratio_configured=!0,C.options.Axis=0;let f=C.getHisto();f.fXaxis.fTitle="x",f.fXaxis.fLabelSize=s,f.fXaxis.fTitleSize=s,f.fYaxis.fLabelSize=s,f.fYaxis.fTitleSize=s,l.getRootPad().fTicky=1,l.forEachPainterInPad(r=>{"function"==typeof r?.testEditable&&r.testEditable(!1)});let p,P=[];return i.fGridlinePositions.length>0&&i.fGridlines.length<i.fGridlinePositions.length&&i.fGridlinePositions.forEach(r=>{let _=!1;if(i.fGridlines.forEach(a=>{a.fY1==a.fY2&&Math.abs(a.fY1-r)<1e-6&&(_=!0)}),!_){let a=(0,T.create)("TLine");a.fX1=t.scale_xmin,a.fX2=t.scale_xmax,a.fY1=a.fY2=r,a.fLineStyle=2,i.fGridlines.push(a),void 0===p&&(p=this.selectCurrentPad(i.fLowerPad.fName)),P.push((0,E.drawTLine)(this.getDom(),a))}}),Promise.all(P).then(()=>o.zoom(t.scale_xmin,t.scale_xmax)).then(()=>(o.o_zoom=o.zoom,o._ratio_up_fp=t,o._ratio_painter=this,o.zoom=function(r,_,a,z,X,L){return this._ratio_painter.setGridsRange(r,_),this._ratio_up_fp.o_zoom(r,_),this.o_zoom(r,_,a,z,X,L)},o.o_sizeChanged=o.sizeChanged,o.sizeChanged=function(){this.o_sizeChanged(),this._ratio_up_fp.fX1NDC=this.fX1NDC,this._ratio_up_fp.fX2NDC=this.fX2NDC,this._ratio_up_fp.o_sizeChanged()},this))})}static draw(i,n,d){let e=new g(i,n,d);return(0,D.ensureTCanvas)(e,!1).then(()=>e.redraw())}}}}]);