"use strict";(self.webpackChunkFCCViewer=self.webpackChunkFCCViewer||[]).push([[592],{3966:(H,S,P)=>{P.r(S),P.d(S,{drawBox:()=>s,drawEllipse:()=>a,drawJSImage:()=>E,drawMarker:()=>f,drawPie:()=>r,drawPolyLine:()=>g,drawPolyMarker:()=>y,drawTLine:()=>n,drawText:()=>e});var b=P(8428),B=P(8681),L=P(2944),F=P(4010),X=P(7861),d=P(9002),A=P(3482),c=P(8200);function e(){let t=this.getObject(),h=this.getPadPainter(),o=h.getPadWidth(),m=h.getPadHeight(),i=t.fX,x=t.fY,l=this.getColor(t.fTextColor),_=!1,p=1,$=t.fTextSize||.05,M=this.getFramePainter();t.TestBit((0,b.BIT)(14))?this.isndc=!0:M&&!M.mode3d?(o=M.getFrameWidth(),m=M.getFrameHeight(),_="upper_layer"):h.getRootPad(!0)||(this.isndc=!0,i=x=.5,t.fTextAlign=22,l||(l="black")),this.createG(_),this.draw_g.attr("transform",null),this.pos_x=this.axisToSvg("x",i,this.isndc),this.pos_y=this.axisToSvg("y",x,this.isndc);let u={align:t.fTextAlign,x:this.pos_x,y:this.pos_y,text:t.fTitle,color:l,latex:0};return t.fTextAngle&&(u.rotate=-t.fTextAngle),"TLatex"==t._typename?(u.latex=1,p=.9):"TMathText"==t._typename&&(u.latex=2,p=.8),this.startTextDrawing(t.fTextFont,Math.round($>1?$:$*Math.min(o,m)*p)),this.drawText(u),this.finishTextDrawing().then(()=>((0,b.isBatchMode)()||(this.pos_dx=this.pos_dy=0,this.moveDrag||(this.moveDrag=function(w,T){this.pos_dx+=w,this.pos_dy+=T,this.draw_g.attr("transform",`translate(${this.pos_dx},${this.pos_dy})`)}),this.moveEnd||(this.moveEnd=function(w){if(w)return;let T=this.getObject();T.fX=this.svgToAxis("x",this.pos_x+this.pos_dx,this.isndc),T.fY=this.svgToAxis("y",this.pos_y+this.pos_dy,this.isndc),this.submitCanvExec(`SetX(${T.fX});;SetY(${T.fY});;`)}),(0,c.Z)(this)),this))}function n(t,h){let o=new F.tK(t,h);return o.redraw=function(){const m=(0,b.BIT)(14),i=this.getObject(),x=new d.rE(i),l=i.TestBit(m);return this.createG(),this.draw_g.append("svg:path").attr("d",`M${this.axisToSvg("x",i.fX1,l)},${this.axisToSvg("y",i.fY1,l)}L${this.axisToSvg("x",i.fX2,l)},${this.axisToSvg("y",i.fY2,l)}`).call(x.func),this},(0,A.ensureTCanvas)(o,!1).then(()=>o.redraw())}function g(){this.createG();let t=this.getObject(),h=new d.rE(t),o=this.createAttFill(t),m=(0,b.BIT)(14),i=t.TestBit(m),x="",l=this.getAxisToSvgFunc(i);for(let _=0;_<=t.fLastPoint;++_)x+=(_>0?"L":"M")+l.x(t.fX[_])+","+l.y(t.fY[_]);"TPolyLine"!=t._typename&&o.setSolidColor("none"),o.empty()||(x+="Z"),this.draw_g.append("svg:path").attr("d",x).call(h.func).call(o.func)}function a(){let t=this.getObject();this.createAttLine({attr:t}),this.createAttFill({attr:t}),this.createG();let h=this.getAxisToSvgFunc(),o=h.x(t.fX1),m=h.y(t.fY1),i=h.x(t.fX1+t.fR1)-o,x=m-h.y(t.fY1+t.fR2),l="",_=0==t.fPhimin&&360==t.fPhimax;if("TCrown"==t._typename&&t.fR1<=0&&(i=h.x(t.fX1+t.fR2)-o),"TCrown"==t._typename&&t.fR1>0){let p=i,$=x,M=m-h.y(t.fY1+t.fR1),u=h.x(t.fX1+t.fR2)-o;if(_)l=`M${-p},0A${p},${M},0,1,0,${p},0A${p},${M},0,1,0,${-p},0M${-u},0A${u},${$},0,1,0,${u},0A${u},${$},0,1,0,${-u},0`;else{let w=t.fPhimax-t.fPhimin>=180?1:0,T=t.fPhimin*Math.PI/180,v=t.fPhimax*Math.PI/180,O=Math.round(p*Math.cos(T)),D=Math.round(M*Math.sin(T));l=`M${Math.round(p*Math.cos(v))},${Math.round(M*Math.sin(v))}A${p},${M},0,${w},0,${O},${D}L${Math.round(u*Math.cos(T))},${Math.round($*Math.sin(T))}A${u},${$},0,${w},1,${Math.round(u*Math.cos(v))},${Math.round($*Math.sin(v))}Z`}}else if(0==t.fTheta)l=_?`M${-i},0A${i},${x},0,1,0,${i},0A${i},${x},0,1,0,${-i},0Z`:`M0,0L${Math.round(i*Math.cos(t.fPhimin*Math.PI/180))},${Math.round(x*Math.sin(t.fPhimin*Math.PI/180))}A${i},${x},0,1,1,${Math.round(i*Math.cos(t.fPhimax*Math.PI/180))},${Math.round(x*Math.sin(t.fPhimax*Math.PI/180))}Z`;else{let p=Math.cos(t.fTheta*Math.PI/180),$=Math.sin(t.fTheta*Math.PI/180),M=t.fPhimin*Math.PI/180,w=200,T=(t.fPhimax*Math.PI/180-M)/(w-(_?0:1)),v=0,O=0;_||(l="M0,0");for(let D=0;D<w;++D){let R=M+D*T,Y=t.fR1*Math.cos(R),z=t.fR2*Math.sin(R),C=h.x(t.fX1+Y*p-z*$)-o,I=h.y(t.fY1+Y*$+z*p)-m;l?l+=v==C?"v"+(I-O):O==I?"h"+(C-v):`l${C-v},${I-O}`:l=`M${C},${I}`,v=C,O=I}l+="Z"}this.draw_g.append("svg:path").attr("transform",`translate(${o},${m})`).attr("d",l).call(this.lineatt.func).call(this.fillatt.func)}function r(){let t=this.getObject();this.createG();let h=this.axisToSvg("x",t.fX),o=this.axisToSvg("y",t.fY),m=this.axisToSvg("x",t.fX+t.fRadius)-h,i=this.axisToSvg("y",t.fY+t.fRadius)-o;this.draw_g.attr("transform",`translate(${h},${o})`);let x=t.fPieSlices.length,l=0,_=t.fAngularOffset*Math.PI/180,p=Math.round(m*Math.cos(_)),$=Math.round(i*Math.sin(_));for(let M=0;M<x;M++)l+=t.fPieSlices[M].fValue;for(let M=0;M<x;M++){let u=t.fPieSlices[M],w=new d.rE({attr:u}),T=this.createAttFill(u);_+=u.fValue/l*2*Math.PI;let v=Math.round(m*Math.cos(_)),O=Math.round(i*Math.sin(_));this.draw_g.append("svg:path").attr("d",`M0,0L${p},${$}A${m},${i},0,0,0,${v},${O}z`).call(w.func).call(T.func),p=v,$=O}}function s(){let t=this.getObject(),o=this.getDrawOpt().toUpperCase().indexOf("L")>=0,m=this.createAttLine(t),i=this.createAttFill(t);this.createG();let x=this.axisToSvg("x",t.fX1),l=this.axisToSvg("x",t.fX2),_=this.axisToSvg("y",t.fY1),p=this.axisToSvg("y",t.fY2),$=Math.min(x,l),M=Math.min(_,p),u=Math.abs(l-x),w=Math.abs(_-p);if(!i.empty()&&!o&&(m.color="none"),this.draw_g.append("svg:path").attr("d",`M${$},${M}h${u}v${w}h${-u}z`).call(m.func).call(i.func),t.fBorderMode&&t.fBorderSize&&i.hasColor()){let T=t.fBorderSize,v=t.fBorderSize,O=`M${$},${M}h${u}l${-T},${v}h${2*T-u}v${w-2*v}l${-T},${v}z`,D=`M${$+u},${M+w}v${-w}l${-T},${v}v${w-2*v}h${2*T-u}l${-T},${v}z`;if(t.fBorderMode<0){let R=O;O=D,D=R}this.draw_g.append("svg:path").attr("d",O).call(i.func).style("fill",(0,B.B8)(i.color).brighter(.5).formatHex()),this.draw_g.append("svg:path").attr("d",D).call(i.func).style("fill",(0,B.B8)(i.color).darker(.5).formatHex())}}function f(){let t=this.getObject(),h=new X.M(t),o=(0,b.BIT)(14),m=t.TestBit(o);this.createG();let i=this.axisToSvg("x",t.fX,m),x=this.axisToSvg("y",t.fY,m),l=h.create(i,x);l&&this.draw_g.append("svg:path").attr("d",l).call(h.func)}function y(){this.createG();let t=this.getObject(),h=new X.M(t),o="",m=this.getAxisToSvgFunc();for(let i=0;i<t.fN;++i)o+=h.create(m.x(t.fX[i]),m.y(t.fY[i]));o&&this.draw_g.append("svg:path").attr("d",o).call(h.func)}function E(t,h,o){let m=new L.be(t),i=m.selectDom(),x=i.append("img").attr("src",h.fName).attr("title",h.fTitle||h.fName);return o&&o.indexOf("scale")>=0?x.style("width","100%").style("height","100%"):o&&o.indexOf("center")>=0&&(i.style("position","relative"),x.attr("style","margin: 0; position: absolute;  top: 50%; left: 50%; transform: translate(-50%, -50%);")),m.setTopPainter(),m}},1397:(H,S,P)=>{P.r(S),P.d(S,{TF1Painter:()=>A,proivdeEvalPar:()=>d});var b=P(8428),B=P(2944),L=P(4010),F=P(9833),X=P(1050);function d(c){c._math=X;let e=c.fTitle,n=!1,g="[";"gaus"===e&&(e="gaus(0)"),c.fFormula&&"string"==typeof c.fFormula.fFormula&&(0==c.fFormula.fFormula.indexOf("[](double*x,double*p)")?(n=!0,g="p[",e=c.fFormula.fFormula.slice(21)):(e=c.fFormula.fFormula,g="[p"),c.fFormula.fClingParameters&&c.fFormula.fParams&&c.fFormula.fParams.forEach(a=>{let r=new RegExp(`(\\[${a.first}\\])`,"g"),s=c.fFormula.fClingParameters[a.second];e=e.replace(r,s<0?`(${s})`:s)})),"formulas"in c&&c.formulas.forEach(a=>{e=e.replaceAll(a.fName,a.fTitle)}),e=e.replace(/\b(abs)\b/g,"TMath::Abs").replace(/\b(TMath::Exp)/g,"Math.exp").replace(/\b(TMath::Abs)/g,"Math.abs"),e=e.replace(/xygaus\(/g,"this._math.gausxy(this, x, y, ").replace(/gaus\(/g,"this._math.gaus(this, x, ").replace(/gausn\(/g,"this._math.gausn(this, x, ").replace(/expo\(/g,"this._math.expo(this, x, ").replace(/landau\(/g,"this._math.landau(this, x, ").replace(/landaun\(/g,"this._math.landaun(this, x, ").replace(/TMath::/g,"this._math.").replace(/ROOT::Math::/g,"this._math.");for(let a=0;a<c.fNpar;++a)e=e.replaceAll(g+a+"]",`(${c.GetParValue(a)})`);e=e.replace(/\b(sin)\b/gi,"Math.sin").replace(/\b(cos)\b/gi,"Math.cos").replace(/\b(tan)\b/gi,"Math.tan").replace(/\b(exp)\b/gi,"Math.exp").replace(/\b(pow)\b/gi,"Math.pow").replace(/pi/g,"Math.PI");for(let a=2;a<10;++a)e=e.replaceAll(`x^${a}`,`Math.pow(x,${a})`);n?(e=e.replace(/x\[0\]/g,"x"),"TF2"===c._typename?(e=e.replace(/x\[1\]/g,"y"),c.evalPar=new Function("x","y",e).bind(c)):c.evalPar=new Function("x",e).bind(c)):c.evalPar="TF2"===c._typename?new Function("x","y","return "+e).bind(c):new Function("x","return "+e).bind(c)}class A extends L.tK{createBins(e){let n=this.getObject(),g=this.getFramePainter(),a=0,r=0;if(g&&!e){let i=g.getGrFuncs(this.second_x,this.second_y);a=i.scale_xmin,r=i.scale_xmax}let s=n.fXmin,f=n.fXmax,y=!1;a!==r&&(a>s&&(s=a),r<f&&(f=r)),g&&g.logx&&s>0&&f>0&&(y=!0,s=Math.log(s),f=Math.log(f));let E=Math.max(n.fNpx,101),t=(f-s)/(E-1),h=[],o=!1;if(!(n.fSave.length>3&&e))for(let i=0;i<E;i++){let x=s+i*t,l=0;y&&(x=Math.exp(x));try{l=n.evalPar(x)}catch{o=!0}if(o)break;Number.isFinite(l)&&h.push({x,y:l})}if((o||e||!h.length)&&n.fSave.length>3){E=n.fSave.length-2,s=n.fSave[E],f=n.fSave[E+1],h=[],t=0;let i=n.$histo&&s===f,x=0;i?(s=n.fSave[--E],x=n.$histo.fXaxis.FindBin(s,0)):t=(f-s)/(E-1);for(let l=0;l<E;++l){let _=i?n.$histo.fXaxis.GetBinCenter(x+l+1):s+t*l;if(a!==r&&(_+2*t<a||_-2*t>r))continue;let p=n.fSave[l];Number.isFinite(p)&&h.push({x:_,y:p})}}return h}createDummyHisto(){let e=0,n=1,g=0,a=1,r=this.createBins(!0);r?.length&&(e=n=r[0].x,g=a=r[0].y,r.forEach(y=>{e=Math.min(y.x,e),n=Math.max(y.x,n),g=Math.min(y.y,g),a=Math.max(y.y,a)}),a>0&&(a*=1+b.gStyle.fHistTopMargin),g<0&&(g*=1+b.gStyle.fHistTopMargin));let s=(0,b.create)("TH1I"),f=this.getObject();return s.fName=f.fName+"_hist",s.fTitle=f.fTitle,s.fXaxis.fXmin=e,s.fXaxis.fXmax=n,s.fYaxis.fXmin=g,s.fYaxis.fXmax=a,s.fMinimum=f.fMinimum,s.fMaximum=f.fMaximum,s}updateObject(e){return!!this.matchObjectType(e)&&(Object.assign(this.getObject(),e),d(this.getObject()),!0)}processTooltipEvent(e){let n=!1;if((!e||!this.bins||e.disabled||!this.bins.length||e.x<this.bins[0].grx||e.x>this.bins[this.bins.length-1].grx)&&(n=!0),n)return this.draw_g&&this.draw_g.select(".tooltip_bin").remove(),null;let r,g=1e5,a=-1;for(let o=0;o<this.bins.length;++o){r=this.bins[o];let m=Math.abs(r.grx-e.x);m<g&&(g=m,a=o)}r=this.bins[a];let s=this.draw_g.select(".tooltip_bin"),f=this.lineatt.width+3;s.empty()&&(s=this.draw_g.append("svg:circle").attr("class","tooltip_bin").style("pointer-events","none").attr("r",f).call(this.lineatt.func).call(this.fillatt.func));let y={name:this.getObject().fName,title:this.getObject().fTitle,x:r.grx,y:r.gry,color1:this.lineatt.color,color2:this.fillatt.getFillColor(),lines:[],exact:Math.abs(r.grx-e.x)<f&&Math.abs(r.gry-e.y)<f};y.changed=s.property("current_bin")!==a,y.menu=y.exact,y.menu_dist=Math.sqrt((r.grx-e.x)**2+(r.gry-e.y)**2),y.changed&&s.attr("cx",r.grx).attr("cy",r.gry).property("current_bin",a);let E=this.getObjectHint();E&&y.lines.push(E);let h=this.getFramePainter()?.getGrFuncs(this.second_x,this.second_y);return h&&y.lines.push(`x = ${h.axisAsText("x",r.x)} y = ${h.axisAsText("y",r.y)}`),y}redraw(){let e=this.getObject(),n=this.getFramePainter(),g=n.getFrameHeight(),a=this.getMainPainter();this.createG(!0),this.bins=this.createBins(!1),this.createAttLine({attr:e}),this.lineatt.used=!1,this.createAttFill({attr:e,kind:1}),this.fillatt.used=!1;let r=n.getGrFuncs(this.second_x,this.second_y);for(let s=0;s<this.bins.length;++s){let f=this.bins[s];f.grx=r.grx(f.x),f.gry=r.gry(f.y)}if(this.bins.length>2){let s=g;a.hmin&&a.hmin>=0&&(s=Math.round(r.gry(0)),(s>g||s<0)&&(s=g));let f=(0,B.Cq)("bezier",this.bins,s,2);this.lineatt.empty()||this.draw_g.append("svg:path").attr("class","line").attr("d",f.path).style("fill","none").call(this.lineatt.func),this.fillatt.empty()||this.draw_g.append("svg:path").attr("class","area").attr("d",f.path+f.close).call(this.fillatt.func)}}canZoomInside(e,n,g){if("x"!==e)return!1;let a=this.getObject();if(a.fSave.length>0){let r=a.fNpx;return Math.abs(a.fSave[r+1]-a.fSave[r+2])/r<Math.abs(n-g)}return!0}static draw(e,n,g){let a=new A(e,n,g),r=new B.pc(g),s=!!a.getMainPainter(),f="AXIS";r.check("SAME"),r.check("X+")&&(f+="X+",a.second_x=s),r.check("Y+")&&(f+="Y+",a.second_y=s),r.check("RX")&&(f+="RX"),r.check("RY")&&(f+="RY"),d(n);let y=Promise.resolve(!0);return(!s||a.second_x||a.second_y)&&(y=F.f.draw(e,a.createDummyHisto(),f)),y.then(()=>(a.addToPadPrimitives(),a.redraw(),a))}}},5596:(H,S,P)=>{P.d(S,{o:()=>F});var b=P(8221),B=P(9275),L=P(8802);class F extends b.TGraphPainter{drawBins3D(d,A){if(!(d.mode3d&&d.grx&&d.gry&&d.grz&&d.toplevel))return console.log("Frame painter missing base 3d elements");if(d.zoom_xmin!=d.zoom_xmax&&(this.options.pos3d<d.zoom_xmin||this.options.pos3d>d.zoom_xmax))return;let c=this.optimizeBins(1e3),e=0,n=c.length-1;if(d.zoom_ymin!=d.zoom_ymax){for(;e<n&&c[e].x<d.zoom_ymin;)e++;for(;e<n&&c[n].x>d.zoom_ymax;)n--}if(e==n)return;let g=[],a=d.grx(this.options.pos3d),r=c[e];for(let f=e+1;f<=n;++f){let y=c[f];g.push(a,d.gry(r.x),d.grz(r.y),a,d.gry(y.x),d.grz(y.y)),r=y}let s=(0,L.Qy)(g,(0,L.rq)(this,A));d.toplevel.add(s),d.render3D(100)}drawAxisHisto(){let d=this.createHistogram();return B.TH1Painter.draw(this.getDom(),d,this.options.Axis)}static draw(d,A,c){return F._drawGraph(new F(d,A),c)}}}}]);